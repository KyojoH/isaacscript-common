<!doctype html>
<html class="default no-js">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>features/saveDataManager | isaacscript-common</title>
	<meta name="description" content="Documentation for isaacscript-common">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="../assets/css/main.css">
	<script async src="../assets/js/search.js" id="search-script"></script>
</head>
<body>
<header>
	<div class="tsd-page-toolbar">
		<div class="container">
			<div class="table-wrap">
				<div class="table-cell" id="tsd-search" data-index="../assets/js/search.json" data-base="..">
					<div class="field">
						<label for="tsd-search-field" class="tsd-widget search no-caption">Search</label>
						<input id="tsd-search-field" type="text" />
					</div>
					<ul class="results">
						<li class="state loading">Preparing search index...</li>
						<li class="state failure">The search index is not available</li>
					</ul>
					<a href="../index.html" class="title">isaacscript-common</a>
				</div>
				<div class="table-cell" id="tsd-widgets">
					<div id="tsd-filter">
						<a href="#" class="tsd-widget options no-caption" data-toggle="options">Options</a>
						<div class="tsd-filter-group">
							<div class="tsd-select" id="tsd-filter-visibility">
								<span class="tsd-select-label">All</span>
								<ul class="tsd-select-list">
									<li data-value="public">Public</li>
									<li data-value="protected">Public/Protected</li>
									<li data-value="private" class="selected">All</li>
								</ul>
							</div>
							<input type="checkbox" id="tsd-filter-inherited" checked />
							<label class="tsd-widget" for="tsd-filter-inherited">Inherited</label>
							<input type="checkbox" id="tsd-filter-externals" checked />
							<label class="tsd-widget" for="tsd-filter-externals">Externals</label>
						</div>
					</div>
					<a href="#" class="tsd-widget menu no-caption" data-toggle="menu">Menu</a>
				</div>
			</div>
		</div>
	</div>
	<div class="tsd-page-title">
		<div class="container">
			<ul class="tsd-breadcrumb">
				<li>
					<a href="../modules.html">isaacscript-common</a>
				</li>
				<li>
					<a href="features_saveDataManager.html">features/saveDataManager</a>
				</li>
			</ul>
			<h1>Module features/saveDataManager</h1>
		</div>
	</div>
</header>
<div class="container container-main">
	<div class="row">
		<div class="col-8 col-content">
			<section class="tsd-panel-group tsd-index-group">
				<h2>Index</h2>
				<section class="tsd-panel tsd-index-panel">
					<div class="tsd-index-content">
						<section class="tsd-index-section ">
							<h3>Functions</h3>
							<ul class="tsd-index-list">
								<li class="tsd-kind-function tsd-parent-kind-module"><a href="features_saveDataManager.html#saveDataManager" class="tsd-kind-icon">save<wbr>Data<wbr>Manager</a></li>
								<li class="tsd-kind-function tsd-parent-kind-module"><a href="features_saveDataManager.html#saveDataManagerSave" class="tsd-kind-icon">save<wbr>Data<wbr>Manager<wbr>Save</a></li>
							</ul>
						</section>
					</div>
				</section>
			</section>
			<section class="tsd-panel-group tsd-member-group ">
				<h2>Functions</h2>
				<section class="tsd-panel tsd-member tsd-kind-function tsd-parent-kind-module">
					<a name="saveDataManager" class="tsd-anchor"></a>
					<h3>save<wbr>Data<wbr>Manager</h3>
					<ul class="tsd-signatures tsd-kind-function tsd-parent-kind-module">
						<li class="tsd-signature tsd-kind-icon">save<wbr>Data<wbr>Manager<span class="tsd-signature-symbol">(</span>key<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">string</span>, saveData<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">SaveData</span>, conditionalFunc<span class="tsd-signature-symbol">?: </span><span class="tsd-signature-symbol">(</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol"> =&gt; </span><span class="tsd-signature-type">boolean</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">void</span></li>
					</ul>
					<ul class="tsd-descriptions">
						<li class="tsd-description">
							<aside class="tsd-sources">
								<ul>
									<li>Defined in <a href="https://github.com/IsaacScript/isaacscript-common/blob/ad370b9/src/features/saveDataManager.ts#L88">features/saveDataManager.ts:88</a></li>
								</ul>
							</aside>
							<div class="tsd-comment tsd-typography">
								<div class="lead">
									<p>This is the entry point to the save data manager, a system which provides two major features:</p>
								</div>
								<ol>
									<li>automatic resetting of variables on a new run, on a new level, or on a new room (as desired)</li>
									<li>automatic saving and loading of all tracked data to the &quot;save#.dat&quot; file</li>
								</ol>
								<p>The save data manager never exposes any data, ensuring that all of the files in your mod have
								variables that are properly scoped.</p>
								<p>Example:</p>
								<pre><code><span style="color: #008000">// in file: feature1.ts</span>
<span style="color: #AF00DB">import</span><span style="color: #000000"> { </span><span style="color: #001080">saveDataManager</span><span style="color: #000000"> } </span><span style="color: #AF00DB">from</span><span style="color: #000000"> </span><span style="color: #A31515">&quot;isaacscript-common&quot;</span><span style="color: #000000">;</span>

<span style="color: #008000">// Declare local variables for this file or feature</span>
<span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">v</span><span style="color: #000000"> = {</span>
<span style="color: #000000">  </span><span style="color: #008000">// These variables are never reset; manage them yourself at will</span>
<span style="color: #000000">  </span><span style="color: #001080">persistent:</span><span style="color: #000000"> {</span>
<span style="color: #000000">    </span><span style="color: #001080">foo1:</span><span style="color: #000000"> </span><span style="color: #098658">0</span><span style="color: #000000">,</span>
<span style="color: #000000">  },</span>

<span style="color: #000000">  </span><span style="color: #008000">// These variables are reset at the beginning of every run</span>
<span style="color: #000000">  </span><span style="color: #001080">run:</span><span style="color: #000000"> {</span>
<span style="color: #000000">    </span><span style="color: #001080">foo2:</span><span style="color: #000000"> </span><span style="color: #098658">0</span><span style="color: #000000">,</span>
<span style="color: #000000">  },</span>

<span style="color: #000000">  </span><span style="color: #008000">// These variables are reset at the beginning of every level</span>
<span style="color: #000000">  </span><span style="color: #001080">level:</span><span style="color: #000000"> {</span>
<span style="color: #000000">    </span><span style="color: #001080">foo3:</span><span style="color: #000000"> </span><span style="color: #098658">0</span><span style="color: #000000">,</span>
<span style="color: #000000">  },</span>

<span style="color: #000000">  </span><span style="color: #008000">// These variables are reset at the beginning of every room</span>
<span style="color: #000000">  </span><span style="color: #001080">room:</span><span style="color: #000000"> {</span>
<span style="color: #000000">    </span><span style="color: #001080">foo2:</span><span style="color: #000000"> </span><span style="color: #098658">0</span><span style="color: #000000">,</span>
<span style="color: #000000">  },</span>
<span style="color: #000000">};</span>
<span style="color: #008000">// (every child object is optional; only create the ones that you need)</span>

<span style="color: #008000">// Register the variables with the save data manager</span>
<span style="color: #008000">// (we need to provide a string key so that it can save the variables properly in the</span>
<span style="color: #008000">// &quot;save#.dat&quot; file)</span>
<span style="color: #795E26">saveDataManager</span><span style="color: #000000">(</span><span style="color: #A31515">&quot;feature1&quot;</span><span style="color: #000000">, </span><span style="color: #001080">v</span><span style="color: #000000">);</span>

<span style="color: #008000">// Elsewhere in the file, use your variables</span>
<span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">feature1Function</span><span style="color: #000000">() {</span>
<span style="color: #000000">  </span><span style="color: #AF00DB">if</span><span style="color: #000000"> (</span><span style="color: #001080">v</span><span style="color: #000000">.</span><span style="color: #001080">run</span><span style="color: #000000">.</span><span style="color: #001080">foo1</span><span style="color: #000000"> &gt; </span><span style="color: #098658">0</span><span style="color: #000000">) {</span>
<span style="color: #000000">    </span><span style="color: #008000">// Do stuff</span>
<span style="color: #000000">  }</span>
<span style="color: #000000">}</span>
</code></pre>
								<p>Save data is recorded to disk in the MC_PRE_GAME_EXIT callback.</p>
								<p>Note that before using the save data manager, you must call the <a href="callbacks_upgradeMod.html#upgradeMod"><code>upgradeMod</code></a> function.</p>
							</div>
							<h4 class="tsd-parameters-title">Parameters</h4>
							<ul class="tsd-parameters">
								<li>
									<h5>key: <span class="tsd-signature-type">string</span></h5>
									<div class="tsd-comment tsd-typography">
										<p>The name of the file or feature that is submitting data to be managed by the save data
											manager. The save data manager will throw an error if it receives a second registration request
										using the same key as a previous subscriber.</p>
									</div>
								</li>
								<li>
									<h5>saveData: <span class="tsd-signature-type">SaveData</span></h5>
									<div class="tsd-comment tsd-typography">
										<p>An object with one or more child-objects of &quot;persistent&quot;, &quot;run&quot;, &quot;level&quot;, or
										&quot;room&quot;.</p>
									</div>
								</li>
								<li>
									<h5><span class="tsd-flag ts-flagOptional">Optional</span> conditionalFunc: <span class="tsd-signature-symbol">(</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol"> =&gt; </span><span class="tsd-signature-type">boolean</span></h5>
									<div class="tsd-comment tsd-typography">
										<p>An optional function to run upon saving this key to disk. If the function
											is false, the key will not be written to disk. This allows mod features to avoid cluttering the
										&quot;save#.dat&quot; file with unnecessary keys.</p>
									</div>
									<ul class="tsd-parameters">
										<li class="tsd-parameter-signature">
											<ul class="tsd-signatures tsd-kind-type-literal">
												<li class="tsd-signature tsd-kind-icon"><span class="tsd-signature-symbol">(</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">boolean</span></li>
											</ul>
											<ul class="tsd-descriptions">
												<li class="tsd-description">
													<h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">boolean</span></h4>
												</li>
											</ul>
										</li>
									</ul>
								</li>
							</ul>
							<h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">void</span></h4>
						</li>
					</ul>
				</section>
				<section class="tsd-panel tsd-member tsd-kind-function tsd-parent-kind-module">
					<a name="saveDataManagerSave" class="tsd-anchor"></a>
					<h3>save<wbr>Data<wbr>Manager<wbr>Save</h3>
					<ul class="tsd-signatures tsd-kind-function tsd-parent-kind-module">
						<li class="tsd-signature tsd-kind-icon">save<wbr>Data<wbr>Manager<wbr>Save<span class="tsd-signature-symbol">(</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">void</span></li>
					</ul>
					<ul class="tsd-descriptions">
						<li class="tsd-description">
							<aside class="tsd-sources">
								<ul>
									<li>Defined in <a href="https://github.com/IsaacScript/isaacscript-common/blob/ad370b9/src/features/saveDataManager.ts#L199">features/saveDataManager.ts:199</a></li>
								</ul>
							</aside>
							<h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">void</span></h4>
						</li>
					</ul>
				</section>
			</section>
		</div>
		<div class="col-4 col-menu menu-sticky-wrap menu-highlight">
			<nav class="tsd-navigation primary">
				<ul>
					<li class=" ">
						<a href="../modules.html">Modules</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="callbacks_upgradeMod.html">callbacks/upgrade<wbr>Mod</a>
					</li>
					<li class="current tsd-kind-module">
						<a href="features_saveDataManager.html">features/save<wbr>Data<wbr>Manager</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="functions_array.html">functions/array</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="functions_entity.html">functions/entity</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="functions_flag.html">functions/flag</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="functions_gridEntity.html">functions/grid<wbr>Entity</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="functions_input.html">functions/input</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="functions_log.html">functions/log</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="functions_math.html">functions/math</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="functions_player.html">functions/player</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="functions_random.html">functions/random</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="functions_stage.html">functions/stage</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="functions_tears.html">functions/tears</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="functions_ui.html">functions/ui</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="functions_util.html">functions/util</a>
					</li>
				</ul>
			</nav>
			<nav class="tsd-navigation secondary menu-sticky">
				<ul class="before-current">
					<li class=" tsd-kind-function tsd-parent-kind-module">
						<a href="features_saveDataManager.html#saveDataManager" class="tsd-kind-icon">save<wbr>Data<wbr>Manager</a>
					</li>
					<li class=" tsd-kind-function tsd-parent-kind-module">
						<a href="features_saveDataManager.html#saveDataManagerSave" class="tsd-kind-icon">save<wbr>Data<wbr>Manager<wbr>Save</a>
					</li>
				</ul>
			</nav>
		</div>
	</div>
</div>
<footer class="with-border-bottom">
	<div class="container">
		<h2>Legend</h2>
		<div class="tsd-legend-group">
			<ul class="tsd-legend">
				<li class="tsd-kind-function"><span class="tsd-kind-icon">Function</span></li>
				<li class="tsd-kind-function tsd-has-type-parameter"><span class="tsd-kind-icon">Function with type parameter</span></li>
				<li class="tsd-kind-type-alias"><span class="tsd-kind-icon">Type alias</span></li>
			</ul>
		</div>
	</div>
</footer>
<div class="container tsd-generator">
	<p>Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p>
</div>
<div class="overlay"></div>
<script src="../assets/js/main.js"></script>
</body>
</html>